<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>.small[Une carte de l’Amérique Latine]</title>
    <meta charset="utf-8" />
    <meta name="author" content=".verysmall[ Le 6 décembre 2019 Dans les locaux du Cesab à Montpellier]" />
    <script src="presentation_files/htmlwidgets-1.3/htmlwidgets.js"></script>
    <link href="presentation_files/vis-4.20.1/vis.css" rel="stylesheet" />
    <script src="presentation_files/vis-4.20.1/vis.min.js"></script>
    <script src="presentation_files/visNetwork-binding-2.0.8/visNetwork.js"></script>
    <link rel="stylesheet" href="assets\css\xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: right, middle, title-slide

# .small[Une carte de l’Amérique Latine]
## .ssmall[Répartition des espèces dans les classes de vulnérabilité]
### .verysmall[<br />Le 6 décembre 2019<br />Dans les locaux du Cesab à Montpellier]

---




## les objectifs
* Faire la carte avec la répartition des espèces de chaque pays dans les différentes classes UICN  

* Utiliser divers éléments abordés pendant la semaine:  
  + tidyverse et Rmarkdown  
  + sf pour les données spatiales
  + drake  
  + l'importation de données internet (API)   
  + **git et github**

---
## On a puller puis pusher
.center[![:scale 100%](manuscrit/output/github.png)]

---
## le graphique des dépendances
.center[![:scale 100%](manuscrit/output/drake_plot.png)]

---
## une autre présentation possible
<div id="htmlwidget-f00d85c599bd546fa5d9" style="width:504px;height:504px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-f00d85c599bd546fa5d9">{"x":{"nodes":{"id":["countries1","tab_species","countries","class_specie","carto","carto2"],"imported":[false,false,false,false,false,false],"label":["countries1\n0.69s","tab_species\n30.79s","countries\n0.26s","class_specie\n0.03s","carto\n0.4s","carto2\n0.14s"],"status":["up to date","up to date","up to date","up to date","up to date","up to date"],"type":["object","object","object","object","object","object"],"font.size":[20,20,20,20,20,20],"color":["#228B22","#228B22","#228B22","#228B22","#228B22","#228B22"],"shape":["dot","dot","dot","dot","dot","dot"],"level":[1,2,2,3,4,4],"x":[-1,-0.333333333333333,-0.333333333333333,0.333333333333333,1,1],"y":[2.22044604925031e-016,-1,1,2.22044604925031e-016,-1,1]},"edges":{"from":["countries1","countries1","tab_species","class_specie","class_specie","countries","countries"],"to":["tab_species","countries","class_specie","carto","carto2","carto","carto2"],"arrows":["to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Object"],"color":["#228B22","#888888"],"shape":["dot","dot"],"font.color":["black","black"],"font.size":[20,20],"id":[1,7]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>

---
## la première carte 


```
## Warning: Removed 48 rows containing non-finite values (stat_pie).
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="presentation_files/figure-html/unnamed-chunk-2-1.png" alt="Fig. 3" width="50%" /&gt;
&lt;p class="caption"&gt;Fig. 3&lt;/p&gt;
&lt;/div&gt;

---
## la deuxième carte 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="presentation_files/figure-html/unnamed-chunk-3-1.png" alt="Fig. 4" width="50%" /&gt;
&lt;p class="caption"&gt;Fig. 4&lt;/p&gt;
&lt;/div&gt;

---
## quelques retours "d’expérience"
* git ne "commutte" pas les dossiers vides.  
* le plan de drake est un data.frame, donc utiliser **=** pour objets=fonctions().  
* "sourcer" charge juste les fonctions (ne les applique pas).
* les problèmes de chemins entre drake et Rmardown nous ont contraint à mettre le .Rmd à la racine.

---

## Les coupables

.center[![:scale 80%](manuscrit/output/merci.png)]

## MERCI
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="assets/libs/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "4:3",
"highlightStyle": "zenburn",
"highlightLines": false,
"countIncrementalSlides": false,
"slideNumberFormat": "%current% / %total%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
